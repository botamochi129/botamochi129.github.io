<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>勝炭鉄道 | 公式サイト</title>
<link rel="stylesheet" href="index.css" />
<link rel="icon" type="image/png" href="image/KR_rogo.png" />
</head>
<body>
  <div id="header-placeholder"></div>

  <main>
    <!-- 各ページ固有のコンテンツ -->
    <section id="news">
      <h2>最近のお知らせ</h2>
      <ul id="latest-news"></ul>
      <p><a href="info.html">お知らせ一覧へ</a></p>
    </section>
    <!-- ほかのセクションはページによって異なります -->
  </main>

  <div id="footer-placeholder"></div>

  <script>
    async function loadTemplate(id, url) {
      try {
        const response = await fetch(url);
        const text = await response.text();
        document.getElementById(id).innerHTML = text;
      } catch (e) {
        console.error(`Failed to load ${url}:`, e);
      }
    }

    // ヘッダー・フッターを読み込み
    loadTemplate('header-placeholder', 'header.html').then(() => {
      const navToggle = document.getElementById('nav-toggle');
      const navMenu = document.getElementById('nav-menu');
      if (navToggle && navMenu) {
        navToggle.addEventListener('click', () => {
          navMenu.classList.toggle('open');
        });
      }
    });
    loadTemplate('footer-placeholder', 'footer.html');

    // index.html用：最新のお知らせをinfo.htmlから取得して表示
    async function loadLatestNews() {
      try {
        const response = await fetch('info.html');
        const text = await response.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(text, 'text/html');
        const newsItems = doc.querySelectorAll('#news-list li');
        const latestNews = Array.from(newsItems).slice(0, 5);
        const ul = document.getElementById('latest-news');
        ul.innerHTML = '';
        latestNews.forEach(item => {
          const li = document.createElement('li');
          li.textContent = item.textContent;
          ul.appendChild(li);
        });
      } catch (e) {
        console.error('お知らせの読み込みに失敗しました:', e);
      }
    }
    if(document.getElementById('latest-news')) {
      loadLatestNews();
    }
  </script>
</body>
</html>
